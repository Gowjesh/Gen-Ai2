# -*- coding: utf-8 -*-
"""Copy of DBMS

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1_XGOMuzn92cpCxMJOCWljIWCqHV8Zaqd
"""

# âœ… Install dependencies (Colab or local)
!pip install --quiet diffusers transformers accelerate scipy safetensors

# âœ… Import required libraries
from diffusers import StableDiffusionPipeline
import torch
from PIL import Image
import matplotlib.pyplot as plt

# âœ… Load a public anime model (no login needed)
model_id = "gsdf/Counterfeit-V2.5"  # Anime style model

# âœ… Initialize the pipeline
pipe = StableDiffusionPipeline.from_pretrained(
    model_id,
    torch_dtype=torch.float32,
    safety_checker=None  # Disable safety if needed (some anime may trigger it)
)

# âœ… Move to GPU if available
device = "cuda" if torch.cuda.is_available() else "cpu"
pipe = pipe.to(device)

# âœ… Get user input
prompt = input("ğŸ“ Enter your anime concept: ")

# âœ… Generate image
print("ğŸ¨ Generating image...")
image = pipe(prompt).images[0]

# âœ… Save and show result
image_path = "anime_generated.png"
image.save(image_path)
plt.imshow(image)
plt.axis("off")
plt.title("âœ¨ Generated Anime Image")
plt.show()